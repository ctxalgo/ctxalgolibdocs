

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>data_sources &mdash; ctxalgolib 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ctxalgolib 0.1 documentation" href="../index.html"/>
        <link rel="up" title="backtesting" href="index.html"/>
        <link rel="next" title="simple_signal_evaluator" href="simple_signal_evaluator.html"/>
        <link rel="prev" title="backtesting" href="index.html"/> 

  
  <script src="../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> ctxalgolib
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../loggers/index.html">loggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../risk/index.html">risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pub_subs/index.html">pub_subs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rule_checking/index.html">rule_checking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news_analysis/index.html">news_analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache/index.html">cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wind/index.html">wind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messaging/index.html">messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trading_utils/index.html">trading_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timer/index.html">timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mt4/index.html">mt4</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">backtesting</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">data_sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple_signal_evaluator.html">simple_signal_evaluator</a></li>
<li class="toctree-l2"><a class="reference internal" href="zipline_algorithm.html">zipline_algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="zipline_datasources.html">zipline_datasources</a></li>
<li class="toctree-l2"><a class="reference internal" href="zipline_utils.html">zipline_utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html">machine_learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ta/index.html">ta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output/index.html">output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pydot/index.html">pydot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slippage/index.html">slippage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trial/index.html">trial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ohlc/index.html">ohlc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../charting/index.html">charting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../report/index.html">report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_imports/index.html">data_imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trail/index.html">trail</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_trading/index.html">http_trading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../time_series/index.html">time_series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../statistics/index.html">statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eval/index.html">eval</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission_control/index.html">mission_control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">utils</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ctxalgolib</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">backtesting</a> &raquo;</li>
      
    <li>data_sources</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../sources/backtesting/data_sources.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ctxalgolib.backtesting.data_sources">
<span id="data-sources"></span><h1>data_sources<a class="headerlink" href="#module-ctxalgolib.backtesting.data_sources" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource">
<em class="property">class </em><code class="descclassname">ctxalgolib.backtesting.data_sources.</code><code class="descname">BacktestingDataSource</code><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_period">
<code class="descname">set_original_period</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_period" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_period">
<code class="descname">original_period</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_period" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data period of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_dominants">
<code class="descname">set_original_dominants</code><span class="sig-paren">(</span><em>dominants</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_dominants" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_dominants">
<code class="descname">original_dominants</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_dominants" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data dominants of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_profits">
<code class="descname">set_original_profits</code><span class="sig-paren">(</span><em>profits</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_profits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_profits">
<code class="descname">original_profits</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_profits" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data profits of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_use_mid_ask_bid">
<code class="descname">set_original_use_mid_ask_bid</code><span class="sig-paren">(</span><em>use_mid_ask_bid</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_use_mid_ask_bid">
<code class="descname">original_use_mid_ask_bid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data use_mid_ask_bid of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_with_open_interest">
<code class="descname">set_original_with_open_interest</code><span class="sig-paren">(</span><em>with_open_interest</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_with_open_interest">
<code class="descname">original_with_open_interest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data with_open_interest of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_order_book_level">
<code class="descname">set_original_order_book_level</code><span class="sig-paren">(</span><em>order_book_level</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.set_original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_order_book_level">
<code class="descname">original_order_book_level</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data order_book_level of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.suggested_time_step">
<code class="descname">suggested_time_step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.suggested_time_step" title="Permalink to this definition">¶</a></dt>
<dd><p>The suggested time step in milliseconds to move time forward by the backtester.
The suggestion is made by analyzing the time interval between data points, and it makes
sure that the time step is sufficiently smaller thn the average time interval between data points.
:return: int, the suggested time step in millisecond. Return None if the suggested time step</p>
<blockquote>
<div>cannot be decided yet (when no data is loaded yet).</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.is_tick">
<code class="descname">is_tick</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.is_tick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.is_data_full_ohlc_bar">
<code class="descname">is_data_full_ohlc_bar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.is_data_full_ohlc_bar" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the data points from current data source represents full ohlc bars.
This is the case if the data source contains ohlc data. If the data source contains tick level
data, which only has a price and a volume, then it is not a full ohlc bar.
:return: boolean, True if the data represents full ohlc bars; False otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.next_ohlcs_for_a_day">
<code class="descname">next_ohlcs_for_a_day</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.next_ohlcs_for_a_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator of OHLC which gives ohlc bars for a single trading day.
Return: an iterator of [OHLC]. The element in the iterator is a list because for multi-instrument</p>
<blockquote>
<div>strategies, there will be multiple ohlc objects on a single trading day.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_ohlcs">
<code class="descname">original_ohlcs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.original_ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ohlcs inside current data source.
:return: dict{string: OHLC}, Keys are instrument ids, values are corresponding ohlcs.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.next_ohlcs_for_a_day_by_instrument">
<code class="descname">next_ohlcs_for_a_day_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.next_ohlcs_for_a_day_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the iterator of OHLC for the given instrument_id.
:param instrument_id: string, instrument id.
:return: an iterator of [OHLC].</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.market_period_provider_by_instrument">
<code class="descname">market_period_provider_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.market_period_provider_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the market period provider for given instrument_id.
:param instrument_id: string, instrument_id.
:return: AbstractMarketPeriodProvider.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.instrument_ids">
<code class="descname">instrument_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.instrument_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of instrument ids inside current data source.
:return [string], the list of instrument ids inside current data source.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.get_date">
<em class="property">static </em><code class="descname">get_date</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a date representation of dt. If dt is None, return None.
:param dt: can be string in format yyyy-mm-dd or a date object.
:return: date.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.all_trading_days">
<code class="descname">all_trading_days</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.all_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of all trading days in current data source.
:return: [date], the list of trading days.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.all_range">
<code class="descname">all_range</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.all_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a shallow copy of current data source.
:return: BacktestingDataSource.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.sub_range">
<code class="descname">sub_range</code><span class="sig-paren">(</span><em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.sub_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a data source which is a subset of current data source.
The returned data source should start at start_date, and end at end_date (both inclusive).
param: start_date: date or string in format yyyy-mm-dd. If None, start_date defaults to the</p>
<blockquote>
<div>first day of current data source.</div></blockquote>
<dl class="docutils">
<dt>param: end_date: date or string in format yyyy-mm-dd. If None, end_date defaults to the</dt>
<dd>last day of current data source.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">BacktestingDataSource. The subset data source.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.ohlcs">
<code class="descname">ohlcs</code><span class="sig-paren">(</span><em>periods=None</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return generated ohlcs according to the given periods.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.
If periods is None, then it defaults to [self.original_period()].</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.
Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.multiple_bars_iterator">
<code class="descname">multiple_bars_iterator</code><span class="sig-paren">(</span><em>period</em>, <em>ohlc_kind='time-based'</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>instrument_ids=None</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.multiple_bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator which yields an element when all specified instruments proceed with a bar. This is convenient
when you are working on a multiple instrument strategy and you want to perform some action which requires
all those instruments to have a new bar.
:param period: Periodicity in case of time-based or int/float in case of volatility-based, The period</p>
<blockquote>
<div>or volatility threshold of the required bars.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ohlc_kind</strong> &#8211; string, can be OhlcGeneratorConstants.time_based or OhlcGeneratorConstants.volatility_based,
which specifies the ohlc kind.</li>
<li><strong>with_open_interests</strong> &#8211; boolean, if True, the ohlc should include open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level,</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, the ohlc bars should be generated by mid ask bid values.
This only has effect if the underlying data source is tick data source.</li>
<li><strong>instrument_ids</strong> &#8211; [string], the list of instrument ids.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, if you have it, provide it here.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">iterator of dict{string: OHLC}, in each element, keys are instrument ids, values
are the ohlcs for those instruments. You can do element[instrument_id].closes[-1] to get the
close value of the last bar of the instrument_id.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingDataSource.bars_iterator">
<code class="descname">bars_iterator</code><span class="sig-paren">(</span><em>periods</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource.bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator to generate and iterate over the specified ohlcs from underlying data source.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:return an iterator of (instrument_id, bars, all_ohlcs).</dt>
<dd><p class="first">instrument_id: string, the instrument id.
bars: dict{string: dict{Periodicity or int/float: Bar}}, the bars that are just generated.</p>
<blockquote>
<div>Meaning: dict{ohlc_kind: dict{period_or_volatility_threshold: Bar}}.
Outer keys are ohlc kind such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;. Inner keys are periods in the case
of time-based ohlcs or volatility thresholds in the case of volatility-based ohlcs. Inner values
are the just generated bars.</div></blockquote>
<dl class="last docutils">
<dt>all_ohlcs: dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.</dt>
<dd>Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated so far.</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource">
<em class="property">class </em><code class="descclassname">ctxalgolib.backtesting.data_sources.</code><code class="descname">BacktestingCompositeDataSource</code><span class="sig-paren">(</span><em>data_sources</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource" title="ctxalgolib.backtesting.data_sources.BacktestingDataSource"><code class="xref py py-class docutils literal"><span class="pre">ctxalgolib.backtesting.data_sources.BacktestingDataSource</span></code></a></p>
<p>Class that represents a data source for multiple instruments.
It is used to simulate strategies which use multiple instruments, for example, pair trading.</p>
<p>Initialize current composite data source. Do not call this method direction.
Use the from_sources method to construct a composite data source.
param: data_sources: [BacktestingDataSource], the list of data sources.</p>
<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.sub_range">
<code class="descname">sub_range</code><span class="sig-paren">(</span><em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.sub_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.instrument_ids">
<code class="descname">instrument_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.instrument_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.next_ohlcs_for_a_day_by_instrument">
<code class="descname">next_ohlcs_for_a_day_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.next_ohlcs_for_a_day_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.market_period_provider_by_instrument">
<code class="descname">market_period_provider_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.market_period_provider_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.from_sources">
<em class="property">static </em><code class="descname">from_sources</code><span class="sig-paren">(</span><em>data_sources</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.from_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a data source containing other sources.
param: data_sources: [BacktestingDataSource], the list of data sources.
:return: CompositeDataSource, the composite data source.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.suggested_time_step">
<code class="descname">suggested_time_step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.suggested_time_step" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.is_data_full_ohlc_bar">
<code class="descname">is_data_full_ohlc_bar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.is_data_full_ohlc_bar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.next_ohlcs_for_a_day">
<code class="descname">next_ohlcs_for_a_day</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.next_ohlcs_for_a_day" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.all_range">
<code class="descname">all_range</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.all_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a shallow copy of current data source.
:return: BacktestingDataSource.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.all_trading_days">
<code class="descname">all_trading_days</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.all_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of all trading days in current data source.
:return: [date], the list of trading days.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.bars_iterator">
<code class="descname">bars_iterator</code><span class="sig-paren">(</span><em>periods</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator to generate and iterate over the specified ohlcs from underlying data source.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:return an iterator of (instrument_id, bars, all_ohlcs).</dt>
<dd><p class="first">instrument_id: string, the instrument id.
bars: dict{string: dict{Periodicity or int/float: Bar}}, the bars that are just generated.</p>
<blockquote>
<div>Meaning: dict{ohlc_kind: dict{period_or_volatility_threshold: Bar}}.
Outer keys are ohlc kind such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;. Inner keys are periods in the case
of time-based ohlcs or volatility thresholds in the case of volatility-based ohlcs. Inner values
are the just generated bars.</div></blockquote>
<dl class="last docutils">
<dt>all_ohlcs: dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.</dt>
<dd>Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated so far.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.get_date">
<code class="descname">get_date</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a date representation of dt. If dt is None, return None.
:param dt: can be string in format yyyy-mm-dd or a date object.
:return: date.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.is_tick">
<code class="descname">is_tick</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.is_tick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.multiple_bars_iterator">
<code class="descname">multiple_bars_iterator</code><span class="sig-paren">(</span><em>period</em>, <em>ohlc_kind='time-based'</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>instrument_ids=None</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.multiple_bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator which yields an element when all specified instruments proceed with a bar. This is convenient
when you are working on a multiple instrument strategy and you want to perform some action which requires
all those instruments to have a new bar.
:param period: Periodicity in case of time-based or int/float in case of volatility-based, The period</p>
<blockquote>
<div>or volatility threshold of the required bars.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ohlc_kind</strong> &#8211; string, can be OhlcGeneratorConstants.time_based or OhlcGeneratorConstants.volatility_based,
which specifies the ohlc kind.</li>
<li><strong>with_open_interests</strong> &#8211; boolean, if True, the ohlc should include open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level,</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, the ohlc bars should be generated by mid ask bid values.
This only has effect if the underlying data source is tick data source.</li>
<li><strong>instrument_ids</strong> &#8211; [string], the list of instrument ids.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, if you have it, provide it here.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">iterator of dict{string: OHLC}, in each element, keys are instrument ids, values
are the ohlcs for those instruments. You can do element[instrument_id].closes[-1] to get the
close value of the last bar of the instrument_id.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.ohlcs">
<code class="descname">ohlcs</code><span class="sig-paren">(</span><em>periods=None</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return generated ohlcs according to the given periods.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.
If periods is None, then it defaults to [self.original_period()].</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.
Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_dominants">
<code class="descname">original_dominants</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_dominants" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data dominants of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_ohlcs">
<code class="descname">original_ohlcs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ohlcs inside current data source.
:return: dict{string: OHLC}, Keys are instrument ids, values are corresponding ohlcs.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_order_book_level">
<code class="descname">original_order_book_level</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data order_book_level of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_period">
<code class="descname">original_period</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_period" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data period of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_profits">
<code class="descname">original_profits</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_profits" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data profits of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_use_mid_ask_bid">
<code class="descname">original_use_mid_ask_bid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data use_mid_ask_bid of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_with_open_interest">
<code class="descname">original_with_open_interest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data with_open_interest of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_dominants">
<code class="descname">set_original_dominants</code><span class="sig-paren">(</span><em>dominants</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_dominants" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_order_book_level">
<code class="descname">set_original_order_book_level</code><span class="sig-paren">(</span><em>order_book_level</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_period">
<code class="descname">set_original_period</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_period" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_profits">
<code class="descname">set_original_profits</code><span class="sig-paren">(</span><em>profits</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_profits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_use_mid_ask_bid">
<code class="descname">set_original_use_mid_ask_bid</code><span class="sig-paren">(</span><em>use_mid_ask_bid</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_with_open_interest">
<code class="descname">set_original_with_open_interest</code><span class="sig-paren">(</span><em>with_open_interest</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingCompositeDataSource.set_original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource">
<em class="property">class </em><code class="descclassname">ctxalgolib.backtesting.data_sources.</code><code class="descname">BacktestingTickDataSource</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>folder</em>, <em>market_period_provider</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>use_natural_day=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource" title="ctxalgolib.backtesting.data_sources.BacktestingDataSource"><code class="xref py py-class docutils literal"><span class="pre">ctxalgolib.backtesting.data_sources.BacktestingDataSource</span></code></a></p>
<p>Class to load tick level trading data from a folder. The folder is assumed to have the following structure:
it has a list of .txt or .csv files with the names yyyymmdd.txt. Each file contains the tick level data for the
corresponding trading day.</p>
<p>Initialize current. Do not call this method directly, use the from_folder method
to construct a tick level data source.
:param instrument_id: string, the instrument id.
:param folder: string, the folder to store data files.
:param market_period_provider: AbstractMarketPeriodProvider, provider to generate</p>
<blockquote>
<div>all market periods in the time range of ohlc.
Since tick data is placed into single trading day files. This parameter is not used.
It is introduced to maintain API consistency.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_date</strong> &#8211; date or string in format yyyy-mm-dd.</li>
<li><strong>end_date</strong> &#8211; date or string in format yyyy-mm-dd. start_date and end_date defines the date range of
data to load. If start_date is None, load data from the first available day. If end_date is None,
load data until the last available day.</li>
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.
Since tick data is placed into single trading day files. This parameter is not used.
It is introduced to maintain API consistency.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.is_tick">
<code class="descname">is_tick</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.is_tick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.sub_range">
<code class="descname">sub_range</code><span class="sig-paren">(</span><em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.sub_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.instrument_ids">
<code class="descname">instrument_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.instrument_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.next_ohlcs_for_a_day_by_instrument">
<code class="descname">next_ohlcs_for_a_day_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.next_ohlcs_for_a_day_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.market_period_provider_by_instrument">
<code class="descname">market_period_provider_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.market_period_provider_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.from_folder">
<em class="property">static </em><code class="descname">from_folder</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>folder</em>, <em>market_period_provider</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>use_natural_day=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.from_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a data source object representing tick level data from the given folder.
:param instrument_id: string, the instrument id.
:param folder: string, the folder containing tick level data
:param market_period_provider: AbstractMarketPeriodProvider, provider to generate</p>
<blockquote>
<div>all market periods in the time range of ohlc.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_date</strong> &#8211; date or string (in format yyyy-mm-dd), the starting date (inclusive) of the data.
If None, use the first available date from data.</li>
<li><strong>end_date</strong> &#8211; date or string (in format yyyy-mm-dd), the end date (inclusive) of the data.
If None, use the last available date from data.</li>
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">BacktestingTickDataSource, the data source object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.get_all_dates">
<code class="descname">get_all_dates</code><span class="sig-paren">(</span><em>folder</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.get_all_dates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.is_data_full_ohlc_bar">
<code class="descname">is_data_full_ohlc_bar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.is_data_full_ohlc_bar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.suggested_time_step">
<code class="descname">suggested_time_step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.suggested_time_step" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.next_ohlcs_for_a_day">
<code class="descname">next_ohlcs_for_a_day</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.next_ohlcs_for_a_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a generator for OHLC objects.
:return: a generator of OHLC object, each OHLC object represents a single trading day.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.all_range">
<code class="descname">all_range</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.all_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a shallow copy of current data source.
:return: BacktestingDataSource.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.all_trading_days">
<code class="descname">all_trading_days</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.all_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of all trading days in current data source.
:return: [date], the list of trading days.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.bars_iterator">
<code class="descname">bars_iterator</code><span class="sig-paren">(</span><em>periods</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator to generate and iterate over the specified ohlcs from underlying data source.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:return an iterator of (instrument_id, bars, all_ohlcs).</dt>
<dd><p class="first">instrument_id: string, the instrument id.
bars: dict{string: dict{Periodicity or int/float: Bar}}, the bars that are just generated.</p>
<blockquote>
<div>Meaning: dict{ohlc_kind: dict{period_or_volatility_threshold: Bar}}.
Outer keys are ohlc kind such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;. Inner keys are periods in the case
of time-based ohlcs or volatility thresholds in the case of volatility-based ohlcs. Inner values
are the just generated bars.</div></blockquote>
<dl class="last docutils">
<dt>all_ohlcs: dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.</dt>
<dd>Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated so far.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.get_date">
<code class="descname">get_date</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a date representation of dt. If dt is None, return None.
:param dt: can be string in format yyyy-mm-dd or a date object.
:return: date.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.multiple_bars_iterator">
<code class="descname">multiple_bars_iterator</code><span class="sig-paren">(</span><em>period</em>, <em>ohlc_kind='time-based'</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>instrument_ids=None</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.multiple_bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator which yields an element when all specified instruments proceed with a bar. This is convenient
when you are working on a multiple instrument strategy and you want to perform some action which requires
all those instruments to have a new bar.
:param period: Periodicity in case of time-based or int/float in case of volatility-based, The period</p>
<blockquote>
<div>or volatility threshold of the required bars.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ohlc_kind</strong> &#8211; string, can be OhlcGeneratorConstants.time_based or OhlcGeneratorConstants.volatility_based,
which specifies the ohlc kind.</li>
<li><strong>with_open_interests</strong> &#8211; boolean, if True, the ohlc should include open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level,</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, the ohlc bars should be generated by mid ask bid values.
This only has effect if the underlying data source is tick data source.</li>
<li><strong>instrument_ids</strong> &#8211; [string], the list of instrument ids.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, if you have it, provide it here.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">iterator of dict{string: OHLC}, in each element, keys are instrument ids, values
are the ohlcs for those instruments. You can do element[instrument_id].closes[-1] to get the
close value of the last bar of the instrument_id.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.ohlcs">
<code class="descname">ohlcs</code><span class="sig-paren">(</span><em>periods=None</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return generated ohlcs according to the given periods.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.
If periods is None, then it defaults to [self.original_period()].</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.
Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_dominants">
<code class="descname">original_dominants</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_dominants" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data dominants of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_ohlcs">
<code class="descname">original_ohlcs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ohlcs inside current data source.
:return: dict{string: OHLC}, Keys are instrument ids, values are corresponding ohlcs.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_order_book_level">
<code class="descname">original_order_book_level</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data order_book_level of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_period">
<code class="descname">original_period</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_period" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data period of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_profits">
<code class="descname">original_profits</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_profits" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data profits of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_use_mid_ask_bid">
<code class="descname">original_use_mid_ask_bid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data use_mid_ask_bid of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_with_open_interest">
<code class="descname">original_with_open_interest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data with_open_interest of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_dominants">
<code class="descname">set_original_dominants</code><span class="sig-paren">(</span><em>dominants</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_dominants" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_order_book_level">
<code class="descname">set_original_order_book_level</code><span class="sig-paren">(</span><em>order_book_level</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_period">
<code class="descname">set_original_period</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_period" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_profits">
<code class="descname">set_original_profits</code><span class="sig-paren">(</span><em>profits</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_profits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_use_mid_ask_bid">
<code class="descname">set_original_use_mid_ask_bid</code><span class="sig-paren">(</span><em>use_mid_ask_bid</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_with_open_interest">
<code class="descname">set_original_with_open_interest</code><span class="sig-paren">(</span><em>with_open_interest</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingTickDataSource.set_original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource">
<em class="property">class </em><code class="descclassname">ctxalgolib.backtesting.data_sources.</code><code class="descname">BacktestingOhlcDataSource</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>ohlc</em>, <em>market_period_provider</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>use_natural_day=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ctxalgolib.backtesting.data_sources.BacktestingDataSource" title="ctxalgolib.backtesting.data_sources.BacktestingDataSource"><code class="xref py py-class docutils literal"><span class="pre">ctxalgolib.backtesting.data_sources.BacktestingDataSource</span></code></a></p>
<p>Class to load ohlc data from files.</p>
<p>Initialize current. Do not call this method directly. Use static method from_file or from_ohlc instead.
:param instrument_id: string, instrument id.
:param ohlc: OHLC. The ohlc object containing the data. Internal use only.
:param market_period_provider: AbstractMarketPeriodProvider, provider to generate</p>
<blockquote>
<div>all market periods in the time range of ohlc.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_date</strong> &#8211; date or string in format yyyy-mm-dd. The starting date (inclusive) to get the data.
If None, use the first available date from data.</li>
<li><strong>end_date</strong> &#8211; date or string in format yyyy-mm-dd. The end date (inclusive) to get the data.
If None, use the last available date from data.</li>
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.sub_range">
<code class="descname">sub_range</code><span class="sig-paren">(</span><em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.sub_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.instrument_ids">
<code class="descname">instrument_ids</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.instrument_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.next_ohlcs_for_a_day_by_instrument">
<code class="descname">next_ohlcs_for_a_day_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.next_ohlcs_for_a_day_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.market_period_provider_by_instrument">
<code class="descname">market_period_provider_by_instrument</code><span class="sig-paren">(</span><em>instrument_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.market_period_provider_by_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.from_file">
<em class="property">static </em><code class="descname">from_file</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>path</em>, <em>market_period_provider=None</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>line_parser=None</em>, <em>use_natural_day=False</em>, <em>ohlc_reader=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a data source by loading data from path.
:param instrument_id: string, the instrument id.
:param path: string, the file containing the ohlc data.</p>
<blockquote>
<div>The file must be in csv format the the following columns (either case is ok):
case 1: instrument_id, datetime, date, time, open, high, low, close, volume, amount (10 columns).
case 2: instrument_id, datetime, open, high, low, close, volume, amount (8 columns).
case 3: datetime, open, high, low, close, volume, amount (7 columns).</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market_period_provider</strong> &#8211; AbstractMarketPeriodProvider, provider to generate
all market periods in the time range of ohlc.
If None, use instrument_id to decide its kind, either future or stock, and then create
proper market period provider.</li>
<li><strong>start_date</strong> &#8211; date or string (in format yyyy-mm-dd), the starting date (inclusive) of the data.</li>
<li><strong>end_date</strong> &#8211; date or string (in format yyyy-mm-dd), the end date (inclusive) of the data.</li>
<li><strong>line_parser</strong> &#8211; a function pointer which parses an ohlc line into data.
Function signature: string -&gt; (timestamp, open, high, low, <a href="#id1"><span class="problematic" id="id2">close_</span></a>, volume, amount)
See the comment of the same parameter at the __init__ method of this class.
If line parser is None, a default parser is used.</li>
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.</li>
<li><strong>ohlc_reader</strong> &#8211; AbstractOhlcReader, the reader to read an ohlc from file.
It can be a text reader or a binary reader.
If not None, use this reader to load ohlc data from file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">BacktestingOhlcDataSource, the data source object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.from_ohlc">
<em class="property">static </em><code class="descname">from_ohlc</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>ohlc</em>, <em>market_period_provider</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>use_natural_day=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.from_ohlc" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a data source by using the given ohlc object.
:param instrument_id: string, the instrument id.
:param ohlc: OHLC, the ohlc object containing the data.
:param start_date: date or string (in format yyyy-mm-dd), the starting date (inclusive) of the data.
:param end_date: date or string (in format yyyy-mm-dd), the end date (inclusive) of the data.
:param use_natural_day: boolean, if True, use natural day to separate bars. If False, use trading days.
:return: BacktestingOhlcDataSource, the data source object.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.from_url">
<em class="property">static </em><code class="descname">from_url</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>market_period_provider</em>, <em>start_date</em>, <em>end_date</em>, <em>period=20</em>, <em>with_exright=True</em>, <em>use_natural_day=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data source from web.
:param instrument_id: string, the instrument id, either a stock id in form of sh600001,</p>
<blockquote>
<div>or a future id in form of IF99.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market_period_provider</strong> &#8211; AbstractMarketPeriodProvider, provider to generate
all market periods in the time range of ohlc.</li>
<li><strong>start_date</strong> &#8211; date, or string in form of yyyy-mm-dd, specifying the start date (inclusive) of the data.</li>
<li><strong>end_date</strong> &#8211; date or string in form of yyyy-mm-dd, specifying the end date (inclusive) of the data.</li>
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">BacktestingOhlcDataSource, the data source object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.is_data_full_ohlc_bar">
<code class="descname">is_data_full_ohlc_bar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.is_data_full_ohlc_bar" title="Permalink to this definition">¶</a></dt>
<dd><p>Since the data is in form of ohlc bars, return True.
:return:</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.suggested_time_step">
<code class="descname">suggested_time_step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.suggested_time_step" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.next_ohlcs_for_a_day">
<code class="descname">next_ohlcs_for_a_day</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.next_ohlcs_for_a_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a generator for OHLC objects.
:return: a generator of OHLC object, each OHLC object represents a single trading day.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.all_range">
<code class="descname">all_range</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.all_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a shallow copy of current data source.
:return: BacktestingDataSource.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.all_trading_days">
<code class="descname">all_trading_days</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.all_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of all trading days in current data source.
:return: [date], the list of trading days.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.bars_iterator">
<code class="descname">bars_iterator</code><span class="sig-paren">(</span><em>periods</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator to generate and iterate over the specified ohlcs from underlying data source.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>:return an iterator of (instrument_id, bars, all_ohlcs).</dt>
<dd><p class="first">instrument_id: string, the instrument id.
bars: dict{string: dict{Periodicity or int/float: Bar}}, the bars that are just generated.</p>
<blockquote>
<div>Meaning: dict{ohlc_kind: dict{period_or_volatility_threshold: Bar}}.
Outer keys are ohlc kind such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;. Inner keys are periods in the case
of time-based ohlcs or volatility thresholds in the case of volatility-based ohlcs. Inner values
are the just generated bars.</div></blockquote>
<dl class="last docutils">
<dt>all_ohlcs: dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.</dt>
<dd>Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated so far.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.get_date">
<code class="descname">get_date</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a date representation of dt. If dt is None, return None.
:param dt: can be string in format yyyy-mm-dd or a date object.
:return: date.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.is_tick">
<code class="descname">is_tick</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.is_tick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.multiple_bars_iterator">
<code class="descname">multiple_bars_iterator</code><span class="sig-paren">(</span><em>period</em>, <em>ohlc_kind='time-based'</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>instrument_ids=None</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.multiple_bars_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an iterator which yields an element when all specified instruments proceed with a bar. This is convenient
when you are working on a multiple instrument strategy and you want to perform some action which requires
all those instruments to have a new bar.
:param period: Periodicity in case of time-based or int/float in case of volatility-based, The period</p>
<blockquote>
<div>or volatility threshold of the required bars.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ohlc_kind</strong> &#8211; string, can be OhlcGeneratorConstants.time_based or OhlcGeneratorConstants.volatility_based,
which specifies the ohlc kind.</li>
<li><strong>with_open_interests</strong> &#8211; boolean, if True, the ohlc should include open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level,</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, the ohlc bars should be generated by mid ask bid values.
This only has effect if the underlying data source is tick data source.</li>
<li><strong>instrument_ids</strong> &#8211; [string], the list of instrument ids.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, if you have it, provide it here.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">iterator of dict{string: OHLC}, in each element, keys are instrument ids, values
are the ohlcs for those instruments. You can do element[instrument_id].closes[-1] to get the
close value of the last bar of the instrument_id.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.ohlcs">
<code class="descname">ohlcs</code><span class="sig-paren">(</span><em>periods=None</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>use_mid_ask_bid=False</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return generated ohlcs according to the given periods.
:param periods: It can be of either of the following three types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Type is [Periodicity].
In this case, you specify the same periodicities of time-based ohlcs
for all instruments. The elements inside the list specify the set of periodicities to use.</li>
<li>Type is dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: [Periodicity or int/float]}, Keys are ohlc kind, such as
time-based or volatility-based. Values are list of time-based periodicity or list of
volatility thresholds. In this case, you specify that different kinds of ohlcs are needed,
and all instruments need the same kind(s) ohlcs.</li>
<li>Type is dict{string: dict{string: [Periodicity or int/float]}.
The meaning is dict{ohlc_kind: dict{instrument_id: [Periodicity or int/float]}}.
In this case, you specify that multiple kinds of ohlcs are needed, and each instrument
needs different kind(s) and different granularities of ohlcs.</li>
</ol>
<p>This parameter specifies the kinds of ohlcs to generate.
If periods is None, then it defaults to [self.original_period()].</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>with_open_interests</strong> &#8211; boolean, specifies whether the generated ohlcs contain open interest information.
Note that only set this to True when the underlying data have open interest information.</li>
<li><strong>order_book_level</strong> &#8211; int, order book level. 0 mean no order book, positive number (1~5) means that
level or order book. Note that only set it to the level which is smaller or equal to the order book
level information contained in the underlying data.</li>
<li><strong>use_mid_ask_bid</strong> &#8211; boolean, if True, use mid ask bid value to generate ohlcs.
Note that you can only set it to True when the underlying data is tick data. If the underlying data
is already ohlc bars, this parameter has no effect.</li>
<li><strong>trading_days</strong> &#8211; TradingDays, a trading days object. If None, a default one will be provided.
Set it to a TradingDays object if you already have one, this is to avoid creating new TradingDays objects,
as the creation takes time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict{string: dict{string: dict{Periodicity or int/float: OHLC}}}.
Meaning: dict{ohlc_kind: dict{instrument_id: dict{Periodicity or int/float: OHLC}}}.
All the ohlcs that are generated so far.
Outer keys are ohlc kind, such as &#8216;time-based&#8217; or &#8216;volatility-based&#8217;.
Second level keys are instrument ids.
Third level keys are are periods in the case of time-based ohlcs or volatility thresholds
in the case of volatility-based ohlcs.
Most inner values are the OHLC objects containing ohlc bars that are generated.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_dominants">
<code class="descname">original_dominants</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_dominants" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data dominants of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_ohlcs">
<code class="descname">original_ohlcs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_ohlcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ohlcs inside current data source.
:return: dict{string: OHLC}, Keys are instrument ids, values are corresponding ohlcs.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_order_book_level">
<code class="descname">original_order_book_level</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data order_book_level of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_period">
<code class="descname">original_period</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_period" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data period of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_profits">
<code class="descname">original_profits</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_profits" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data profits of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_use_mid_ask_bid">
<code class="descname">original_use_mid_ask_bid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data use_mid_ask_bid of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_with_open_interest">
<code class="descname">original_with_open_interest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>The original data with_open_interest of volatility threshold of current data source.
:return: Periodicity or int/float.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_dominants">
<code class="descname">set_original_dominants</code><span class="sig-paren">(</span><em>dominants</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_dominants" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_order_book_level">
<code class="descname">set_original_order_book_level</code><span class="sig-paren">(</span><em>order_book_level</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_order_book_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_period">
<code class="descname">set_original_period</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_period" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_profits">
<code class="descname">set_original_profits</code><span class="sig-paren">(</span><em>profits</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_profits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_use_mid_ask_bid">
<code class="descname">set_original_use_mid_ask_bid</code><span class="sig-paren">(</span><em>use_mid_ask_bid</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_use_mid_ask_bid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_with_open_interest">
<code class="descname">set_original_with_open_interest</code><span class="sig-paren">(</span><em>with_open_interest</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.BacktestingOhlcDataSource.set_original_with_open_interest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgolib.backtesting.data_sources.DataSourceGenerator">
<em class="property">class </em><code class="descclassname">ctxalgolib.backtesting.data_sources.</code><code class="descname">DataSourceGenerator</code><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.DataSourceGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class to provide convenient methods to generate data sources.</p>
<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.DataSourceGenerator.generate">
<code class="descname">generate</code><span class="sig-paren">(</span><em>instrument_ids</em>, <em>market_period_provider</em>, <em>period</em>, <em>start_date</em>, <em>end_date</em>, <em>base_folder</em>, <em>data_folder=None</em>, <em>override_existing=False</em>, <em>data_paths=None</em>, <em>line_parser=None</em>, <em>use_natural_day=False</em>, <em>ohlc_reader=None</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>use_mid_ask_bid=False</em>, <em>kind=None</em>, <em>exchange=None</em>, <em>market=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.DataSourceGenerator.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate data source for backtesting testing.
If period is Periodicity.TICK, it is assumed that the tick data is already inside data_folder.
Otherwise, the trading data will be downloaded from ctxalgo.com when it does not exist or
if the file exists but override_existing is True.
:param instrument_ids: [string], the list of instrument ids whose data should be included.
:param market_period_provider:  AbstractMarketPeriodProvider, market period provider for instrument_ids.
:param period: Periodicity, the backtesting period.
:param start_date: date or string in form of yyyy-mm-dd, the start date (inclusive) of the data.
:param end_date: date or string in form of yyyy-mm-dd, the end date (inclusive) of the data.
:param base_folder: string, the folder to store download data, if downloading is necessary.
:param data_folder: string, the folder to store the data. If None, use a default folder.
:param override_existing: bool, if True and period is not Periodicity.TICK, download data from ctxalgo.com.
:param data_paths: dict{string: string}, the list of data file paths for instrument_ids.</p>
<blockquote>
<div>Keys are instrument ids, values are the data file paths for those instruments.
In tick mode, the paths should be folders, in ohlc bar mode, the paths should be files.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>line_parser</strong> &#8211; <p>a function pointer which parses an ohlc line into data.
Function signature: string -&gt; (timestamp, open, high, low, <a href="#id3"><span class="problematic" id="id4">close_</span></a>, volume, amount)
The parameter to the function is a string representing a line in ohlc file.
The return value of the function is a tuple containing the parsed data:</p>
<blockquote>
<div>timestamp: datetime, the timestamp of the ohlc line.
open: float, the open price,
high: float, the high price,
low: float, the low price,
close: float, the close price,
volume: int, the volume,
amount: float, the amount of money that has been traded, if there is no amount data<blockquote>
<div>in the raw text, set this to 0.</div></blockquote>
</div></blockquote>
<p>If line parser is None, a default parser is used.</p>
</li>
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.</li>
<li><strong>ohlc_reader</strong> &#8211; AbstractOhlcReader, the reader to read an ohlc from file.
It can be a text reader or a binary reader.
If not None, use this reader to load ohlc data from file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">BacktestingDataSource.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.DataSourceGenerator.parse_file_name">
<code class="descname">parse_file_name</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.DataSourceGenerator.parse_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse file name parts from given path.
:param path: string, the path of the file whose name is to be parsed.
:return: (isntrument_id, period, start_date, end_date), all elements are of type string.</p>
<blockquote>
<div>instrument_id specifies the instrument whose data is inside that file.
period is the period of the ohlc data, for example, 1m, 5m, 1d.
start_date, and end_date are in form of yyyymmdd.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.DataSourceGenerator.find_possible_file">
<code class="descname">find_possible_file</code><span class="sig-paren">(</span><em>folder</em>, <em>instrument_id</em>, <em>period</em>, <em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.DataSourceGenerator.find_possible_file" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Find an existing file in folder that contains enough data defined by instrument_id,</dt>
<dd>period, start_date and end_date.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>folder</strong> &#8211; string, the folder to search for data file.</li>
<li><strong>instrument_id</strong> &#8211; string, the instrument id whose data should be included.</li>
<li><strong>period</strong> &#8211; Periodicity, the backtesting period.</li>
<li><strong>start_date</strong> &#8211; date or string in form of yyyy-mm-dd, the start date (inclusive) of the data.</li>
<li><strong>end_date</strong> &#8211; date or string in form of yyyy-mm-dd, the end date (inclusive) of the data.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">string, the path of the file that contains enough data. If no such file is found,
return None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.backtesting.data_sources.DataSourceGenerator.generate_for_single_instrument">
<code class="descname">generate_for_single_instrument</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>period</em>, <em>market_period_provider</em>, <em>start_date</em>, <em>end_date</em>, <em>data_folder</em>, <em>override_existing=False</em>, <em>data_path=None</em>, <em>line_parser=None</em>, <em>use_natural_day=False</em>, <em>ohlc_reader=None</em>, <em>with_open_interests=False</em>, <em>order_book_level=0</em>, <em>dominants=False</em>, <em>profits=False</em>, <em>use_mid_ask_bid=False</em>, <em>kind=None</em>, <em>exchange=None</em>, <em>market=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.backtesting.data_sources.DataSourceGenerator.generate_for_single_instrument" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate data source for a single instrument.
:param instrument_id: string, the instrument id whose data should be included.
:param period: Periodicity, the backtesting period.
:param market_period_provider: AbstractMarketPeriodProvider, the market period provider.
:param start_date: date or string in form of yyyy-mm-dd, the start date (inclusive) of the data.
:param end_date: date or string in form of yyyy-mm-dd, the end date (inclusive) of the data.
:param data_folder: string, the folder to store the data.
:param override_existing: bool, if True and period is not Periodicity.TICK, download data from ctxalgo.com.
:param data_path: string, the backtesting data path for instrument_id. If this path is provided,</p>
<blockquote>
<div>the data in the file will be used to generate the data source. No data download will happen.
In tick level mode, this file must be a folder, in ohlc bar mode, this path must be a file.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>use_natural_day</strong> &#8211; boolean, if True, use natural day to separate bars. If False, use trading days.</li>
<li><strong>ohlc_reader</strong> &#8211; AbstractOhlcReader, the reader to read an ohlc from file.
It can be a text reader or a binary reader.
If not None, use this reader to load ohlc data from file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">BacktestingDataSource.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="simple_signal_evaluator.html" class="btn btn-neutral float-right" title="simple_signal_evaluator" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="backtesting" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, .
      Last updated on Nov 24, 2016.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../static/jquery.js"></script>
      <script type="text/javascript" src="../static/underscore.js"></script>
      <script type="text/javascript" src="../static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>