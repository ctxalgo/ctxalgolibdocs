

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>time_transformer &mdash; ctxalgolib 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ctxalgolib 0.1 documentation" href="../index.html"/>
        <link rel="up" title="ohlc" href="index.html"/>
        <link rel="next" title="exright" href="exright.html"/>
        <link rel="prev" title="MySqlChineseHolidays" href="holidays/MySqlChineseHolidays.html"/> 

  
  <script src="../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> ctxalgolib
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../loggers/index.html">loggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../risk/index.html">risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pub_subs/index.html">pub_subs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rule_checking/index.html">rule_checking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news_analysis/index.html">news_analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache/index.html">cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wind/index.html">wind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messaging/index.html">messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trading_utils/index.html">trading_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timer/index.html">timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mt4/index.html">mt4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backtesting/index.html">backtesting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html">machine_learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ta/index.html">ta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output/index.html">output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pydot/index.html">pydot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slippage/index.html">slippage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trial/index.html">trial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ohlc</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="holidays/index.html">holidays</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">time_transformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="exright.html">exright</a></li>
<li class="toctree-l2"><a class="reference internal" href="volatility_ohlc_utils.html">volatility_ohlc_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="bar_arrival_request.html">bar_arrival_request</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_spec_utils.html">ohlc_spec_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctp_file_log_reader.html">ctp_file_log_reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_concatenator.html">ohlc_concatenator</a></li>
<li class="toctree-l2"><a class="reference internal" href="bar_generator.html">bar_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_equality_checker.html">ohlc_equality_checker</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_logger.html">ohlc_logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="abstract_ohlc.html">abstract_ohlc</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_utils.html">ohlc_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="price_type.html">price_type</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_generator.html">ohlc_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading_days.html">trading_days</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_merger.html">ohlc_merger</a></li>
<li class="toctree-l2"><a class="reference internal" href="periodicity.html">periodicity</a></li>
<li class="toctree-l2"><a class="reference internal" href="ohlc_reader_writer.html">ohlc_reader_writer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../charting/index.html">charting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../report/index.html">report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_imports/index.html">data_imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trail/index.html">trail</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http_trading/index.html">http_trading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../time_series/index.html">time_series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../statistics/index.html">statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eval/index.html">eval</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission_control/index.html">mission_control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">utils</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ctxalgolib</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">ohlc</a> &raquo;</li>
      
    <li>time_transformer</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../sources/ohlc/time_transformer.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ctxalgolib.ohlc.time_transformer">
<span id="time-transformer"></span><h1>time_transformer<a class="headerlink" href="#module-ctxalgolib.ohlc.time_transformer" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer">
<em class="property">class </em><code class="descclassname">ctxalgolib.ohlc.time_transformer.</code><code class="descname">TimeTransformer</code><span class="sig-paren">(</span><em>old_market_periods</em>, <em>trading_days=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>This class transforms the time of those data that with night trading periods (cross day)
for example, DAY0  21:00 ~ DAY1 2:30 DAY1 9:00 ~ DAY1 10:15 DAY1 10:30 ~ DAY1 11:30 DAY1 13:30 ~ DAY1 15:00&#8217;</p>
<dl class="docutils">
<dt>old_market_periods, [(time, time)], a list of time periods defining the open periods (in one day)</dt>
<dd>for the market. Each element of the array defines a period. The first element is the open time,
the second element is the close time.
The open time of the first period and the close time of the last period defines
the market open and close time for a day.
market close time can be smaller than market open time, this means that the market opens
at the previous date. For example, for 黄金期货, market open time = time(21, 0, 0) and
market close time = time(15, 0, 0). This means for that future, a day&#8217;s trading starts at
date1 21:00, and ends at date1+1 15:00. This affects the calculation of daily bars.</dd>
</dl>
<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.transform_time">
<code class="descname">transform_time</code><span class="sig-paren">(</span><em>old_timestamp</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.transform_time" title="Permalink to this definition">¶</a></dt>
<dd><p>transform dates from old market periods to the new market periods (for dates)
Parameters:</p>
<blockquote>
<div>old_timestamp, datetime, the old time</div></blockquote>
<dl class="docutils">
<dt>Return:</dt>
<dd>datetime, the transformed time data</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.transform_time_back">
<code class="descname">transform_time_back</code><span class="sig-paren">(</span><em>new_timestamp</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.transform_time_back" title="Permalink to this definition">¶</a></dt>
<dd><p>transform time back to old timestamp according to time_plus
Parameters:</p>
<blockquote>
<div>new_timestamp, datetime, the new time data</div></blockquote>
<dl class="docutils">
<dt>Return:</dt>
<dd>datetime, the transformed time data</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.within_market_periods">
<code class="descname">within_market_periods</code><span class="sig-paren">(</span><em>new_timestamp</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.within_market_periods" title="Permalink to this definition">¶</a></dt>
<dd><p>to judge a given timestamp is within the new market periods or not
Parameters:</p>
<blockquote>
<div>new_timestamp, datetime, the new time data</div></blockquote>
<dl class="docutils">
<dt>Return:</dt>
<dd>boolean, True if the given timestamp is within the new market periods, False otherwise</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.before_market_periods">
<code class="descname">before_market_periods</code><span class="sig-paren">(</span><em>new_timestamp</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.before_market_periods" title="Permalink to this definition">¶</a></dt>
<dd><p>to judge a given timestamp is before the new market periods or not
:param new_timestamp: datetime, the new time data
:return: boolean, True if the given timestamp is before the new market periods, False otherwise</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.get_modified_end_timestamp">
<code class="descname">get_modified_end_timestamp</code><span class="sig-paren">(</span><em>end_time</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.get_modified_end_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>modify end time to make it within market periods
:param end_time: datetime, the end time that may need to modify
:return: datetime, modified end time</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.get_forward_time_within_market_period">
<code class="descname">get_forward_time_within_market_period</code><span class="sig-paren">(</span><em>timestamp</em>, <em>offset</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.get_forward_time_within_market_period" title="Permalink to this definition">¶</a></dt>
<dd><p>modify timestamp to make it within market periods, forward
:param timestamp: datetime, the timestamp that may need to modify
:param offset: timedelta, which is little than timedelta()
:return: datetime, modified timestamp</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgolib.ohlc.time_transformer.TimeTransformer.get_backward_time_within_market_period">
<code class="descname">get_backward_time_within_market_period</code><span class="sig-paren">(</span><em>timestamp</em>, <em>offset</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgolib.ohlc.time_transformer.TimeTransformer.get_backward_time_within_market_period" title="Permalink to this definition">¶</a></dt>
<dd><p>modify timestamp to make it within market periods, backward
:param timestamp: datetime, the timestamp that may need to modify
:param offset: timedelta, which is little than timedelta()
:return: datetime, modified timestamp</p>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="exright.html" class="btn btn-neutral float-right" title="exright" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="holidays/MySqlChineseHolidays.html" class="btn btn-neutral" title="MySqlChineseHolidays" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, .
      Last updated on Nov 24, 2016.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../static/jquery.js"></script>
      <script type="text/javascript" src="../static/underscore.js"></script>
      <script type="text/javascript" src="../static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>